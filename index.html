<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlexLog Pro | Elite Tracker</title>
    <style>
        :root {
            --primary: #3b82f6;
            --secondary: #10b981;
            --danger: #ef4444;
            --dark: #0f172a;
            --bg: #f1f5f9;
            --card: #ffffff;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--dark);
            margin: 0;
            padding: 15px;
            padding-bottom: 80px; /* Space for fixed timer */
        }

        .container { max-width: 600px; margin: 0 auto; }

        .header { text-align: center; padding: 20px 0; }
        .header h1 { margin: 0; color: var(--primary); font-size: 2rem; }

        .card {
            background: var(--card);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        h2 { margin-top: 0; font-size: 1.1rem; display: flex; align-items: center; gap: 8px; }

        .input-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        
        input, select {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.2s;
        }

        input:focus { border-color: var(--primary); outline: none; }

        button {
            width: 100%;
            padding: 14px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
        }

        /* Stats & Logs */
        .log-item {
            padding: 15px;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .badge {
            font-size: 0.7rem;
            background: #e2e8f0;
            padding: 2px 8px;
            border-radius: 10px;
            text-transform: uppercase;
        }

        /* Floating Timer Bar */
        .timer-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--dark);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .timer-display { font-family: monospace; font-size: 1.5rem; color: var(--secondary); }
        .timer-btn { width: auto; padding: 8px 15px; margin: 0; font-size: 0.8rem; background: #334155; }

        /* PR Dashboard */
        .pr-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .pr-card { background: #eff6ff; padding: 10px; border-radius: 8px; border-left: 4px solid var(--primary); }
        .pr-val { font-weight: 800; font-size: 1.1rem; color: var(--primary); }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>‚ö° FlexLog <span style="font-weight: 300;">Pro</span></h1>
    </div>

    <div class="card">
        <h2>üèÜ Top Records</h2>
        <div id="prList" class="pr-grid">
            <p style="color: #94a3b8; font-size: 0.8rem;">Log exercises to see your PRs here.</p>
        </div>
    </div>

    <div class="card">
        <h2>‚ûï Log Set</h2>
        <input type="text" id="exercise" placeholder="Exercise Name..." list="common-exercises">
        <datalist id="common-exercises">
            <option value="Bench Press">
            <option value="Squat">
            <option value="Deadlift">
            <option value="Overhead Press">
            <option value="Bicep Curls">
        </datalist>
        
        <div class="input-group">
            <input type="number" id="weight" placeholder="Weight">
            <input type="number" id="reps" placeholder="Reps">
        </div>
        
        <select id="category">
            <option value="Strength">Strength</option>
            <option value="Hypertrophy">Hypertrophy</option>
            <option value="Endurance">Endurance</option>
        </select>
        
        <button onclick="addLog()">LOG SET & START TIMER</button>
    </div>

    <div class="card">
        <h2>üìÖ Recent History</h2>
        <div id="history"></div>
    </div>
</div>

<div class="timer-bar">
    <div>REST: <span class="timer-display" id="timerDisplay">00:00</span></div>
    <div style="display: flex; gap: 5px;">
        <button class="timer-btn" onclick="startTimer(60)">+60s</button>
        <button class="timer-btn" onclick="resetTimer()" style="background:var(--danger)">Reset</button>
    </div>
</div>

<script>
    let timerInterval;
    let timeLeft = 0;

    document.addEventListener('DOMContentLoaded', () => {
        renderLogs();
        renderPRs();
    });

    function addLog() {
        const exercise = document.getElementById('exercise').value.trim();
        const weight = parseFloat(document.getElementById('weight').value);
        const reps = parseInt(document.getElementById('reps').value);
        const category = document.getElementById('category').value;

        if (!exercise || isNaN(weight) || isNaN(reps)) {
            alert("Fill out the specs, Champ!");
            return;
        }

        const log = {
            id: Date.now(),
            exercise, weight, reps, category,
            date: new Date().toLocaleDateString()
        };

        const logs = JSON.parse(localStorage.getItem('pro_logs')) || [];
        logs.unshift(log);
        localStorage.setItem('pro_logs', JSON.stringify(logs));

        renderLogs();
        renderPRs();
        startTimer(90); // Default 90s rest after a set
        
        // Reset inputs but keep exercise name for next set
        document.getElementById('weight').value = '';
        document.getElementById('reps').value = '';
    }

    function renderLogs() {
        const container = document.getElementById('history');
        const logs = JSON.parse(localStorage.getItem('pro_logs')) || [];
        
        container.innerHTML = logs.slice(0, 10).map(log => `
            <div class="log-item">
                <div>
                    <strong>${log.exercise}</strong> <span class="badge">${log.category}</span><br>
                    <small style="color:#64748b">${log.date}</small>
                </div>
                <div style="text-align: right;">
                    <span style="font-weight:bold">${log.weight}kg</span> x ${log.reps}<br>
                    <button onclick="deleteLog(${log.id})" style="background:none; color:red; width:auto; padding:0; margin:0; font-size:10px;">Delete</button>
                </div>
            </div>
        `).join('');
    }

    function renderPRs() {
        const container = document.getElementById('prList');
        const logs = JSON.parse(localStorage.getItem('pro_logs')) || [];
        const prMap = {};

        logs.forEach(log => {
            if (!prMap[log.exercise] || log.weight > prMap[log.exercise]) {
                prMap[log.exercise] = log.weight;
            }
        });

        const prEntries = Object.entries(prMap).slice(0, 4);
        if (prEntries.length > 0) {
            container.innerHTML = prEntries.map(([name, weight]) => `
                <div class="pr-card">
                    <div style="font-size: 0.7rem; color: #64748b;">${name}</div>
                    <div class="pr-val">${weight}kg</div>
                </div>
            `).join('');
        }
    }

    function deleteLog(id) {
        let logs = JSON.parse(localStorage.getItem('pro_logs'));
        logs = logs.filter(l => l.id !== id);
        localStorage.setItem('pro_logs', JSON.stringify(logs));
        renderLogs();
        renderPRs();
    }

    // --- TIMER LOGIC ---
    function startTimer(seconds) {
        clearInterval(timerInterval);
        timeLeft = seconds;
        updateTimerDisplay();
        
        timerInterval = setInterval(() => {
            timeLeft--;
            updateTimerDisplay();
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                alert("Rest over! Get to work!");
            }
        }, 1000);
    }

    function resetTimer() {
        clearInterval(timerInterval);
        timeLeft = 0;
        updateTimerDisplay();
    }

    function updateTimerDisplay() {
        const mins = Math.floor(timeLeft / 60);
        const secs = timeLeft % 60;
        document.getElementById('timerDisplay').innerText = 
            `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }
</script>

</body>
</html>
