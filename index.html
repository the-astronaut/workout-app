<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Workout Tracker</title>

<style>
body { font-family: Arial; margin:0; background:#111; color:white }
header { padding:15px; background:#222; text-align:center }
button { padding:12px; margin:5px; border:none; background:#4CAF50; color:white; border-radius:8px }
.card { background:#222; margin:10px; padding:15px; border-radius:10px }
input, select { width:100%; padding:10px; margin:5px 0 }
.nav { position:fixed; bottom:0; width:100%; background:#222; display:flex }
.nav button { flex:1; background:#333 }
.hidden { display:none }
.setRow { display:flex; gap:5px }
.setRow input { flex:1 }
.timer { font-size:24px; text-align:center; margin:10px }
</style>
</head>

<body>

<header id="title">Home</header>

<div id="home"></div>
<div id="create" class="hidden"></div>
<div id="tracker" class="hidden"></div>
<div id="analytics" class="hidden"></div>

<div class="nav">
<button onclick="show('home')">Home</button>
<button onclick="show('create')">Create</button>
<button onclick="showAnalytics()">Analytics</button>
</div>

<script>

let workouts = JSON.parse(localStorage.getItem("workouts")||"[]");
let exercises = JSON.parse(localStorage.getItem("exercises")||"[]");
let history = JSON.parse(localStorage.getItem("history")||"[]");

function save(){
 localStorage.setItem("workouts",JSON.stringify(workouts));
 localStorage.setItem("exercises",JSON.stringify(exercises));
 localStorage.setItem("history",JSON.stringify(history));
}

function show(page){
 document.querySelectorAll("div[id]").forEach(d=>d.classList.add("hidden"));
 document.getElementById(page).classList.remove("hidden");
 document.getElementById("title").innerText=page.toUpperCase();

 if(page=="home") renderHome();
 if(page=="create") renderCreate();
}

function renderHome(){
 let d=document.getElementById("home");
 d.innerHTML=`<button onclick="addExercise()">Add Exercise</button>`;
 workouts.forEach((w,i)=>{
   d.innerHTML+=`
   <div class="card">
     <b>${w.name}</b><br>
     <button onclick="startWorkout(${i})">Start</button>
     <button onclick="deleteWorkout(${i})">Delete</button>
   </div>`;
 });
}

function deleteWorkout(i){
 workouts.splice(i,1); save(); renderHome();
}

function renderCreate(){
 let d=document.getElementById("create");
 d.innerHTML=`
 <input id="wname" placeholder="Workout name">
 <button onclick="createWorkout()">Create Workout</button>
 <h3>Exercise Library</h3>
 `;

 exercises.forEach((e,i)=>{
   d.innerHTML+=`
   <div class="card">
     ${e.name} (${e.group})
     <button onclick="deleteExercise(${i})">Delete</button>
   </div>`;
 });
}

function createWorkout(){
 let name=document.getElementById("wname").value;
 if(!name) return alert("Enter name");

 workouts.push({name, exercises:[]});
 save();
 renderHome();
 show("home");
}

function deleteExercise(i){
 exercises.splice(i,1); save(); renderCreate();
}

function addExercise(){
 let name=prompt("Exercise name");
 if(!name) return;
 let group=prompt("Muscle group?");
 exercises.push({name,group});
 save();
 renderCreate();
}

function startWorkout(i){
 let w=workouts[i];
 let d=document.getElementById("tracker");
 d.innerHTML=`<h2>${w.name}</h2><div id="timer" class="timer"></div>`;

 exercises.forEach((ex)=>{
   d.innerHTML+=`
   <div class="card">
     <b>${ex.name}</b>
     <div id="sets-${ex.name}"></div>
     <button onclick="addSet('${ex.name}')">Add Set</button>
   </div>`;
 });

 show("tracker");
}

function addSet(name){
 let container=document.getElementById("sets-"+name);
 let div=document.createElement("div");
 div.className="setRow";
 div.innerHTML=`
 <input placeholder="Reps">
 <input placeholder="Weight">
 <button onclick="restTimer()">âœ“</button>
 `;
 container.appendChild(div);
}

let restInterval;
function restTimer(){
 let time=60;
 let t=document.getElementById("timer");
 t.innerText=time;

 clearInterval(restInterval);
 restInterval=setInterval(()=>{
   time--;
   t.innerText=time;
   if(time<=0) clearInterval(restInterval);
 },1000);
}

function showAnalytics(){
 show("analytics");
 let d=document.getElementById("analytics");

 let totals={};

 exercises.forEach(e=>totals[e.group]=0);

 history.forEach(h=>{
   totals[h.group]+=h.sets;
 });

 d.innerHTML="<h2>Sets per muscle</h2>";

 for(let g in totals){
   d.innerHTML+=`<div class="card">${g}: ${totals[g]}</div>`;
 }
}

renderHome();

</script>
</body>
</html>


